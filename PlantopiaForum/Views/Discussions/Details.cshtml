@model PlantopiaForum.Models.Discussion

@{
    ViewData["Title"] = "Details";
}

<div class="container my-5">
    <h1 class="text-center text-darkgreen mb-4">Discussion Details</h1>

    <div class="card shadow-sm">
        <div class="card-body">

            <!-- Image -->
            <div class="text-center mb-4">
                <img src="@Url.Content("/images/" + Model.ImageFilename)" alt="@Model.Content" class="img-fluid" style="max-width: 50%; height: auto;" />
            </div>

            <hr />

            <!--  Details -->
            <dl class="row">
                <dt class="col-sm-3" style="color:darkgreen;">
                    @Html.DisplayNameFor(model => model.Title)
                </dt>
                <dd class="col-sm-9">
                    @Html.DisplayFor(model => model.Title)
                </dd>

                <dt class="col-sm-3" style="color:darkgreen;">
                    @Html.DisplayNameFor(model => model.Content)
                </dt>
                <dd class="col-sm-9">
                    @Html.DisplayFor(model => model.Content)
                </dd>

                <dt class="col-sm-3 " style="color:darkgreen;">
                    @Html.DisplayNameFor(model => model.ImageFilename)
                </dt>
                <dd class="col-sm-9">
                    @Html.DisplayFor(model => model.ImageFilename)
                </dd>

                <dt class="col-sm-3 " style="color:darkgreen;">
                    @Html.DisplayNameFor(model => model.CreatedAt)
                </dt>
                <dd class="col-sm-9">
                    @Html.DisplayFor(model => model.CreatedAt)
                </dd>
            </dl>
        </div>
    </div>

    <!-- Buttons Section -->
    <div class="text-center mt-4">
        <a asp-action="Edit" asp-route-id="@Model?.DiscussionId" class="btn btn-sm" style="color:white; background-color:darkgreen">Edit</a>
        <a asp-action="Index" class="btn btn-sm ms-3" style="color:white; background-color:darkgreen">Back to List</a>

        <!--  Comment Button -->
        <a asp-controller="Comments" asp-action="Create" asp-route-id="@Model.DiscussionId" class="btn btn-sm ms-3" style="color:white; background-color:darkgreen">Add Comment</a>
    </div>

    <!-- Display Existing Comments -->
    <div class="container my-5">
        <h5 style="color:darkgreen; font-family: 'Pacifico', cursive; "> Comments</h5>
        @if (Model.Comments != null && Model.Comments.Any())
        {
            foreach (var comment in Model.Comments)
            {
                <div class="card mb-2">
                    <div class="card-body">
                        <p>@comment.Content</p>
                        <p><small class="text-muted">Posted on @comment.CreateDate.ToString("MMMM dd, yyyy")</small></p>
                      
                    </div>
                </div>
            }
        }
        else
        {
            <p>No comments yet. Be the first to comment!</p>
        }
    </div>
</div>